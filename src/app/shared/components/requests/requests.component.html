
<div class="card card-cascade narrower container mt-2 mb-4">

  <div class="card-header white d-flex justify-content-between align-items-center py-3">
    <p class="h5-responsive font-weight-bold mb-0">{{'components.requests.requests' | translate}}</p>
    <div class="col">
      <div class="input-group">
        <input class="form-control" type="text" placeholder="Search" aria-label="Search"
          [(ngModel)]="searchText" (keyup.enter)="search()">
        <div class="input-group-append">
          <button class="input-group-text btn-light" (click)="search()">
            <i class="fas fa-search text-grey" aria-hidden="true"></i>
          </button>
        </div>
      </div>
    </div>
  </div>
  
    <div class="px-4">
  

        <table class="table table-hover" matSort >
  
          <thead>
            <tr>
              <th>
              </th>
              <th mat-sort-header="id" (click)="changeSort('Id')"
              [ngClass]="{'active-header': queryParams.sort.orderByField == 'Id'}">
                <a>{{ 'common.id' | translate }}
                </a>
              </th>
              <th>
                {{ 'components.requests.book-name' | translate }}
                
              </th>
              <th>
               {{ 'components.requests.user-who-requested' | translate }}
                
              </th>
              <th mat-sort-header="requestdate" (click)="changeSort('RequestDate')"
              [ngClass]="{'active-header': queryParams.sort.orderByField == 'RequestDate'}">
                {{ 'components.requests.request-date' | translate }}
                
              </th>
              <th class="th-lg">
              {{ 'components.requests.approve' | translate }}
              </th>
              <th class="th-lg">
                {{ 'components.requests.delete' | translate }}
                
              </th>
            </tr>
          </thead>

          <tbody>
            <tr *ngFor="let request of requests">
              <th scope="row">
              </th>
              <td>{{ request.id }}</td>
              <td><a [routerLink]="['/book/bookId']">{{ request.book.name }}</a></td>
              <td>{{ request.user.firstName + " " + request.user.lastName }}</td>
              <td>{{ request.requestDate  | date:'short'}}</td>
              <td>
                <button type="button" class="btn btn-outline-success btn-sm waves-effect" (click)="approveRequest(request.id)">{{ 'components.requests.approve' | translate }}</button>
              </td>
              <td>
                <button type="button" class="btn btn-sm btn-outline-danger waves-effect" (click)="deleteRequest(request.id)">X</button>
              </td>
            </tr>
          </tbody>

        </table>
        <app-pagination *ngIf="requests && requests.length > 0" [arraySize]="totalSize"
          [pageSize]="queryParams.pageSize" [selectedPage]="queryParams.page" (onPageChange)="pageChanged($event)">
        </app-pagination>
        
    </div>

  </div>